taskhub-api/
│
├── app/                          # Application Source Code
│   │
│   ├── main.py                   # FastAPI entrypoint (routes, middleware)
│   ├── config.py                 # Global settings via pydantic-settings
│   ├── db.py                     # SQLAlchemy async engine + session (NEW)
│   ├── security.py               # Password hashing + JWT helpers
│   ├── idempotency.py            # SQL-backed job_log + idempotent helpers
│   │
│   ├── routes/                   # API Route Modules
│   │   ├── auth.py               # User registration + login (SQL)
│   │   └── tasks.py              # Task CRUD + pagination (SQL)
│   │
│   ├── schemas/                  # Pydantic Request/Response Schemas (UNCHANGED)
│   │   ├── user_schema.py        # User create/login/public models
│   │   ├── task_schema.py        # Task create/response schemas
│   │   ├── pagination_schema.py  # Pagination contracts (Page[T])
│   │   └── token_schema.py       # JWT token models
│   │
│   ├── models/                   # SQLAlchemy ORM Models (REPLACED)
│   │   ├── base.py               # Declarative Base
│   │   ├── user.py               # users table
│   │   ├── task.py               # tasks table + pagination index
│   │   └── job_log.py            # idempotent background jobs table
│   │
│   ├── workers/                  # Celery Worker + Background Jobs
│   │   ├── celery_app.py         # Celery app (NO DB INIT)
│   │   ├── __init__.py
│   │   └── tasks/                # Celery task modules
│   │       └── email_tasks.py    # send_welcome_email, etc.
│   │
│   └── tests/                    # Automated Test Suite (SQL)
│       ├── conftest.py           # SQL test fixtures (NEW)
│       ├── test_api.py           # Health check & API tests
│       ├── test_tasks.py         # Task CRUD + pagination tests
│       └── test_idempotency.py   # Idempotent job execution tests
│
├── alembic/                      # Database migrations (NEW)
│   ├── env.py
│   ├── script.py.mako
│   └── versions/
│       └── 0001_init_schema.py   # users, tasks, job_log tables
│
├── docker-compose.yml            # Orchestration (API + PostgreSQL + Redis + Celery)
├── Dockerfile                    # API image build instructions
├── requirements.txt              # Python dependencies
├── .env.example                  # Environment variable template
├── .gitignore                    # Git ignored files
├── alembic.ini                   # Alembic configuration (NEW)
└── README.md                     # Project documentation (v2.0 SQL edition)
